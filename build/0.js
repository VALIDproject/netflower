webpackJsonp([0,5],{36:function(t,e,r){"use strict";function n(){var t=void 0;return function(e){return t||(t=r.i(_.a)("/dataset/"+e.id).then(function(t){return t.rowIds=r.i(c.f)(t.rowIds),t}))}}function i(t,e,n){var i=void 0;return function(o){return i?Promise.resolve(i):(i={rowIds:r.i(c.f)(e),rows:t,data:n},Promise.resolve(i))}}function o(t){return r.i(a.m)(t.loader)?new y(t,t.loader):new y(t,n())}function u(t,e,r,n){return new y(t,i(e,r,n))}Object.defineProperty(e,"__esModule",{value:!0});var s=r(3),a=r(1),_=r(12),c=r(42),p=r(43),f=r(44),l=r(47),h=r(49);r.d(e,"VectorBase",function(){return d}),r.d(e,"Vector",function(){return y}),r.d(e,"StratificationVector",function(){return g}),e.create=o,e.wrap=u;var d=function(t){function e(e){var r=t.call(this)||this;return r._root=e,r}return s.a(e,t),Object.defineProperty(e.prototype,"dim",{get:function(){return[this.length]},enumerable:!0,configurable:!0}),e.prototype.data=function(t){throw new Error("not implemented")},e.prototype.size=function(){throw new Error("not implemented")},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.view=function(t){return void 0===t&&(t=r.i(c.c)()),new m(this._root,t)},e.prototype.idView=function(t){var e=this;return void 0===t&&(t=r.i(c.c)()),this.ids().then(function(r){return e.view(r.indexOf(t))})},e.prototype.stats=function(){return this.data().then(function(t){return r.i(l.b)(t)})},Object.defineProperty(e.prototype,"indices",{get:function(){return r.i(c.l)(0,this.length)},enumerable:!0,configurable:!0}),e.prototype.groups=function(){var t=this,e=this._root.valuetype;return"categorical"===e.type?this.data().then(function(n){var i={name:t._root.desc.id};return e.categories[0].color&&(i.colors=e.categories.map(function(t){return t.color})),e.categories[0].label&&(i.labels=e.categories.map(function(t){return t.label})),r.i(f.b)(n,e.categories.map(function(t){return"string"==typeof t?t:t.name}),i)}):Promise.resolve(r.i(c.k)(this._root.desc.id,[r.i(c.b)(this.indices.dim(0))]))},e.prototype.stratification=function(){var t=this;return this.groups().then(function(e){return new g(t,e)})},e.prototype.hist=function(t,e){var n=this;void 0===e&&(e=r.i(c.c)());var i=this._root.valuetype;return this.data(e).then(function(e){switch(i.type){case"categorical":return r.i(l.c)(e,n.indices.dim(0),e.length,i.categories.map(function(t){return"string"==typeof t?t:t.name}),i.categories.map(function(t){return"string"==typeof t?t:t.name||t.label}),i.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}));case"real":case"int":return r.i(l.d)(e,n.indices.dim(0),e.length,t||Math.round(Math.sqrt(n.length)),i.range);default:return null}})},e.prototype.every=function(t,e){return this.data().then(function(r){return r.every(t,e)})},e.prototype.some=function(t,e){return this.data().then(function(r){return r.some(t,e)})},e.prototype.forEach=function(t,e){this.data().then(function(r){return r.forEach(t,e)})},e.prototype.reduce=function(t,e,n){function i(){return t.apply(n,r.i(a.h)(arguments))}return this.data().then(function(t){return t.reduce(i,e)})},e.prototype.reduceRight=function(t,e,n){function i(){return t.apply(n,r.i(a.h)(arguments))}return this.data().then(function(t){return t.reduceRight(i,e)})},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(c.f)(t.range))),e},e}(p.a),y=function(t){function e(e,n){var i=t.call(this,null)||this;i.desc=e,i.loader=n,i._root=i;var o=e;return i.valuetype=o.value,i._idtype=r.i(p.b)(o.idtype),i}return s.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),e.prototype.load=function(){return this.loader(this.desc)},e.prototype.at=function(t){return this.load().then(function(e){return e.data[t]})},e.prototype.data=function(t){void 0===t&&(t=r.i(c.c)());var e=this;return this.load().then(function(n){return r.i(f.c)(t.filter(n.data,e.dim),e.valuetype)})},e.prototype.names=function(t){void 0===t&&(t=r.i(c.c)());var e=this;return this.load().then(function(r){return t.filter(r.rows,e.dim)})},e.prototype.ids=function(t){void 0===t&&(t=r.i(c.c)());var e=this;return this.load().then(function(r){return r.rowIds.preMultiply(t,e.dim)})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},e.prototype.sort=function(t,e){var n=this;return this.data().then(function(i){var o=r.i(a.o)(i,t,e);return n.view(r.i(c.d)(o))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var n=this;return this.data().then(function(i){var o=r.i(a.p)(i,t,e);return n.view(r.i(c.d)(o))})},e.prototype.persist=function(){return this.desc.id},e}(d),m=function(t){function e(e,r){var n=t.call(this,e)||this;return n.range=r,n}return s.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this._root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this._root.persist(),range:this.range.toString()}},e.prototype.size=function(){return this.range.size(this._root.dim)[0]},e.prototype.at=function(t){var e=this.range.invert([t],this._root.dim);return this._root.at(e[0])},e.prototype.data=function(t){return void 0===t&&(t=r.i(c.c)()),this._root.data(this.range.preMultiply(t,this._root.dim))},e.prototype.names=function(t){return void 0===t&&(t=r.i(c.c)()),this._root.names(this.range.preMultiply(t,this._root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=r.i(c.c)()),this._root.ids(this.range.preMultiply(t,this._root.dim))},e.prototype.view=function(t){return void 0===t&&(t=r.i(c.c)()),t.isAll?this:new e(this._root,this.range.preMultiply(t,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this._root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._root.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.sort=function(t,e){var n=this;return this.data().then(function(i){var o=r.i(a.o)(i,t,e);return n.view(n.range.preMultiply(r.i(c.d)(o)))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var n=this;return this.data().then(function(i){var o=r.i(a.p)(i,t,e);return n.view(n.range.preMultiply(r.i(c.d)(o)))})},e}(d),g=function(t){function e(e,r){var n=t.call(this,{id:e.desc.id+"-s",name:e.desc.name,fqname:e.desc.fqname,type:"stratification",size:e.dim,ngroups:r.groups.length,groups:r.groups.map(function(t){return{name:t.name,color:t.color,size:t.length}})})||this;return n.v=e,n.r=r,n}return s.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.v.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new h.a(this,t,this.groups[t])},e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(c.c)()),this.range().then(function(t){return r.i(l.a)(t)})},e.prototype.vector=function(){return Promise.resolve(this.v)},e.prototype.origin=function(){return this.vector()},e.prototype.range=function(){return Promise.resolve(this.r)},e.prototype.idRange=function(){var t=this,e=this;return this.ids().then(function(r){var n=t.r;return r.dim(0).preMultiply(n,e.dim[0])})},e.prototype.names=function(t){return void 0===t&&(t=r.i(c.c)()),this.v.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(c.c)()),this.v.ids(t)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.desc.ngroups},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.v.persist(),asstrat:!0}},e}(f.a)},37:function(module,__webpack_exports__,__webpack_require__){"use strict";function adapterOne2Two(t){return{rowIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.rowIds,e.size)})},rows:function(e,r){return t(e).then(function(t){return r.dim(0).filter(t.rows,e.size[0])})},col:function(e,r,n){return t(e).then(function(t){return n.filter(t.objs.map(function(t){return t[r]}),e.size)})},objs:function(e,r){return t(e).then(function(t){return r.filter(t.objs,e.size)})},data:function(e,r){return t(e).then(function(t){return r.filter(toFlat(t.objs,e.columns),e.size)})},view:function(t,e,r){return null}}}function viaAPIViewLoader(t,e){var r=void 0;return function(n){return r||(r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/table/"+n.id+"/view/"+t,e).then(function(t){return t.rowIds=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t.rowIds),t.objs=maskObjects(t.data,n),t}))}}function maskCol(t,e){return e.value&&"missing"in e.value?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__datatype__.c)(t,e.value):t}function maskObjects(t,e){return e.columns.some(function(t){return t.value&&"missing"in t.value})&&t.forEach(function(t){e.columns.forEach(function(e){return t[e.name]=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__datatype__.c)(t[e.name],e.value)})}),t}function viaAPI2Loader(){var t=null,e=null,r={},n=null,i=null,o={rowIds:function(e,r){return null==t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/table/"+e.id+"/rowIds").then(function(t){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t)})),t.then(function(t){return t.preMultiply(r,e.size)})},rows:function(t,r){return null==e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/table/"+t.id+"/rows")),e.then(function(e){return r.dim(0).filter(e,t.size[0])})},objs:function(t,e){return e.isAll?(null==n&&(n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/table/"+t.id+"/raw").then(function(e){return maskObjects(e,t)})),n):null!=n?n.then(function(r){return e.filter(r,t.size)}):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.c)("/dataset/table/"+t.id+"/raw",{range:e.toString()}).then(function(e){return maskObjects(e,t)})},data:function(t,e){return e.isAll?(null==i&&(i=o.objs(t,e).then(function(e){return toFlat(e,t.columns)})),i):null!=i?i.then(function(r){return e.filter(r,t.size)}):o.objs(t,e).then(function(e){return toFlat(e,t.columns)})},col:function(t,e,i){var o=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.g)(t.columns,function(t){return t.name===e});return i.isAll?(null==r[e]&&(r[e]=null===n?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/table/"+t.id+"/col/"+e).then(function(t){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__datatype__.c)(t,o)}):n.then(function(t){return t.map(function(t){return t[e]})})),r[e]):null!=r[e]?r[e].then(function(e){return i.filter(e,t.size)}):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.c)("/dataset/table/"+t.id+"/col/"+e,{range:i.toString()}).then(function(t){return maskCol(t,o)})},view:function(t,e,r){return viaAPIViewLoader(e,r)}};return o}function toFlat(t,e){return t.map(function(t){return e.map(function(e){return t[e.name]})})}function viaDataLoader(t,e){var r=void 0;return function(n){function i(t){return t.getter?t.getter:function(e){return e[t.column||t.name]}}if(r)return Promise.resolve(r);var o=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.m)(e)?e:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.s)(e.toString()),u=n.columns.map(i),s=t.map(function(t){var e={_:t};return n.columns.forEach(function(r,n){e[r.name]=u[n](t)}),e}),a=t.map(o);return r={rowIds:n.rowassigner?n.rowassigner.map(a):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.l)(0,t.length),rows:a,objs:s,data:u.map(function(e){return t.map(e)})},Promise.resolve(r)}}function create(t){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.m)(t.loader)?new Table(t,adapterOne2Two(t.loader)):new Table(t,viaAPI2Loader())}function wrapObjects(t,e,r){return new Table(t,adapterOne2Two(viaDataLoader(e,r)))}function fromVectors(t,e){return new VectorTable(t,e)}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1__index__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__ajax__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_3__range__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_4__idtype__=__webpack_require__(43),__WEBPACK_IMPORTED_MODULE_5__datatype__=__webpack_require__(44),__WEBPACK_IMPORTED_MODULE_6__vector_impl__=__webpack_require__(36);__webpack_require__.d(__webpack_exports__,"TableBase",function(){return TableBase}),__webpack_require__.d(__webpack_exports__,"Table",function(){return Table}),__webpack_require__.d(__webpack_exports__,"TableVector",function(){return TableVector}),__webpack_exports__.create=create,__webpack_exports__.wrapObjects=wrapObjects,__webpack_require__.d(__webpack_exports__,"VectorTable",function(){return VectorTable}),__webpack_exports__.fromVectors=fromVectors;var TableBase=function(_super){function TableBase(t){var e=_super.call(this)||this;return e._root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(TableBase,_super),Object.defineProperty(TableBase.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(TableBase.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(TableBase.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),TableBase.prototype.size=function(){throw new Error("not implemented")},TableBase.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),new TableView(this._root,t)},TableBase.prototype.queryView=function(t,e){throw new Error("not implemented")},TableBase.prototype.idView=function(t){var e=this;return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.ids().then(function(r){return e.view(r.indexOf(t))})},TableBase.prototype.reduce=function(t,e,r,n){return new MultITableVector(this,t,e,r,n)},TableBase.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__idtype__.b)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(persisted.range)):this},TableBase}(__WEBPACK_IMPORTED_MODULE_4__idtype__.a),Table=function(t){function e(e,r){var n=t.call(this,null)||this;n.desc=e,n.loader=r,n._root=n;var i=e;return n.rowtype=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__idtype__.b)(i.idtype||i.rowtype),n.vectors=i.columns.map(function(t,e){return new TableVector(n,e,t)}),n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype]},enumerable:!0,configurable:!0}),e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),t.filter(this.vectors,[this.ncol])},e.prototype.at=function(t,e){return this.colData(this.col(e).column,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(t)).then(function(t){return t[0]})},e.prototype.queryView=function(t,r){return new e(this.desc,adapterOne2Two(this.loader.view(this.desc,t,r)))},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.data(this.desc,t)},e.prototype.colData=function(t,e){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.col(this.desc,t,e)},e.prototype.objects=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.objs(this.desc,t)},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.rows(this.desc,t)},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.rowIds(this.desc,t)},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.rowIds(t)},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(e){return e&&"number"==typeof e.col?this.col(e.col):t.prototype.restore.call(this,e)},e}(TableBase),TableView=function(t){function e(e,r){var n=t.call(this,e)||this;return n.range=r,n.range=r,n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this._root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this._root.persist(),range:this.range.toString()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t.range))),e},e.prototype.size=function(){return this.range.size(this._root.dim)},e.prototype.at=function(t,e){var r=this.range.invert([t,e],this._root.dim);return this._root.at(r[0],r[1])},e.prototype.col=function(t){var e=this.range.invert([0,t],this._root.dim);return this._root.col(e[1])},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.cols(this.range.swap().preMultiply(t,this._root.dim))},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.data(this.range.preMultiply(t,this._root.dim))},e.prototype.objects=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.objects(this.range.preMultiply(t,this._root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.rows(this.range.preMultiply(t,this._root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.rowIds(this.range.preMultiply(t,this._root.dim))},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.rowIds(t)},e.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),t.isAll?this:new e(this._root,this.range.preMultiply(t,this.dim))},Object.defineProperty(e.prototype,"rowtype",{get:function(){return this._root.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype]},enumerable:!0,configurable:!0}),e}(TableBase),TableVector=function(t){function e(e,r,n){var i=t.call(this,null)||this;return i.table=e,i.index=r,i.desc=n,i._root=i,i.valuetype=n.value,i.desc.fqname=e.desc.fqname+"/"+i.desc.name,i.desc.type="vector",i}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"column",{get:function(){return this.desc.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.table.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),col:this.index}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t.range))),e},e.prototype.at=function(t){return this.table.at(t,this.index)},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.table.colData(this.column,t)},e.prototype.names=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.table.rows(t)},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.table.rowIds(t)},e.prototype.size=function(){return this.table.nrow},e.prototype.sort=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.o)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.p)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e}(__WEBPACK_IMPORTED_MODULE_6__vector_impl__.VectorBase),MultITableVector=function(t){function e(e,r,n,i,o){void 0===n&&(n=e),void 0===i&&(i=null),void 0===o&&(o=e.rowtype);var u=t.call(this,null)||this;return u.table=e,u.f=r,u.this_f=n,u.valuetype=i,u._idtype=o,u.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"vector",id:e.desc.id+"-p"},u._root=u,u}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.table.persist(),f:this.f.toString(),valuetype:this.valuetype?this.valuetype:void 0,idtype:this.idtype===this.table.rowtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t.range))),e},e.prototype.size=function(){return this.table.nrow},e.prototype.names=function(t){return this.table.rows(t)},e.prototype.ids=function(t){return this.table.rowIds(t)},e.prototype.at=function(t){var e=this;return this.table.data(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(t)).then(function(t){return e.f.call(e.this_f,t[0])})},e.prototype.data=function(t){var e=this;return this.table.data(t).then(function(t){return t.map(e.f,e.this_f)})},e.prototype.sort=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.o)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.p)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e}(__WEBPACK_IMPORTED_MODULE_6__vector_impl__.VectorBase),VectorTable=function(t){function e(e,r){var n=t.call(this,null)||this;n.desc=e,n.vectors=r,n._root=n;var i=e,o=r[0].desc;return i.idtype=o.idtype,i.size=[r[0].length,r.length],i.columns=r.map(function(t){return t.desc}),n.rowtype=r[0].idtype,n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype]},enumerable:!0,configurable:!0}),e.prototype.col=function(t){return this.vectors[t]},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),t.filter(this.vectors,[this.ncol])},e.prototype.at=function(t,e){return this.col(t).at(e)},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),Promise.all(this.vectors.map(function(e){return e.data(t)})).then(function(t){var e=t[0].map(function(t){return[t]});return t.slice(1).forEach(function(t){return t.forEach(function(t,r){return e[r].push(t)})}),e})},e.prototype.objects=function(t){var e=this;return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),Promise.all(this.vectors.map(function(e){return e.data(t)})).then(function(t){var r=e.vectors.map(function(t){return t.desc.name}),n=t[0].map(function(t){return e={},e[r[0]]=t,e;var e});return t.slice(1).forEach(function(t,e){var i=r[e+1];t.forEach(function(t,e){return n[e][i]=t})}),n})},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.col(0).names(t)},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.col(0).ids(t)},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.rowIds(t)},e.prototype.size=function(){return[this.col(0).length,this.vectors.length]},e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(e){return e&&"number"==typeof e.col?this.col(e.col):t.prototype.restore.call(this,e)},e}(TableBase)},39:function(module,__webpack_exports__,__webpack_require__){"use strict";function flatten(t,e,r){void 0===r&&(r=0);var n=[],i=[t.length,t[0].length];if(0===r)n=n.concat.apply(n,t);else for(var o=0;o<i[1];++o)t.forEach(function(t){n.push(t[o])});return{data:n,indices:e.dim(r).repeat(i[1-r])}}function adapterOne2Two(t){return{rowIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.rowIds,e.size)})},rows:function(e,r){return t(e).then(function(t){return r.dim(0).filter(t.rows,e.size[0])})},colIds:function(e,r){return t(e).then(function(t){return r.preMultiply(t.colIds,e.size)})},cols:function(e,r){return t(e).then(function(t){return r.dim(1).filter(t.cols,e.size[1])})},ids:function(e,r){return t(e).then(function(t){return r.preMultiply(t.ids,e.size)})},at:function(e,r,n){return t(e).then(function(t){return t[r][n]})},data:function(e,r){return t(e).then(function(t){return r.filter(t.data,e.size)})}}}function maskIt(t){return function(e){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__datatype__.c)(e,t)}}function viaAPI2Loader(){var t=null,e=null,r=null,n=null,i=null,o=null,u={rowIds:function(e,r){return null==t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+e.id+"/rowIds").then(function(t){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t)})),t.then(function(t){return t.preMultiply(r,e.size)})},rows:function(t,r){return null==e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+t.id+"/rows")),e.then(function(e){return r.dim(0).filter(e,t.size[0])})},colIds:function(t,e){return null==r&&(r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+t.id+"/colIds").then(function(t){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t)})),r.then(function(r){return r.preMultiply(e,t.size)})},cols:function(t,e){return null==n&&(n=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+t.id+"/cols")),n.then(function(r){return e.dim(1).filter(r,t.size[1])})},ids:function(t,e){if(1===e.ndim)return u.rowIds(t,e);e.dim(0),e.dim(1);var r=e.split();return Promise.all([u.rowIds(t,r[0]||__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),u.colIds(t,r[1]||__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)())]).then(function(t){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.i)(t)})},hist:function(t,e,r){if(void 0===r&&(r=NaN),e.isAll&&isNaN(r))return null==o&&(o=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+t.id+"/hist").then(function(e){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__math__.e)(e,t.value.range)})),o;var n={range:e.toString()};return isNaN(r)||(n.bins=r),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+t.id+"/hist",n).then(function(e){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__math__.e)(e,t.value.range)})},at:function(t,e,r){return u.data(t,__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)([e],[r])).then(function(e){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__datatype__.c)(e[0][0],t)})},data:function(t,e){if(e.isAll)return null==i&&(i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+t.id+"/raw").then(maskIt(t))),i;if(null!=i)return i.then(function(r){return e.filter(r,t.size)});var r=t.size;return r[0]*r[1]<1e3||t.loadAtOnce?(i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.a)("/dataset/matrix/"+t.id+"/raw").then(maskIt(t)),i.then(function(r){return e.filter(r,t.size)})):__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.c)("/dataset/matrix/"+t.id+"/raw",{range:e.toString()}).then(maskIt(t))},heatmapUrl:function(t,e,r){var n={format:r.format||"png",range:e.toString()};return!0===r.transpose&&(n.format_transpose=!0),r.range&&(n.format_min=r.range[0],n.format_max=r.range[1]),r.palette&&(n.format_palette=r.palette),__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__ajax__.d)("/dataset/matrix/"+t.id+"/data",n)}};return u}function create(t,e){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.m)(t.loader)?new Matrix(t,adapterOne2Two(t.loader)):new Matrix(t,e||viaAPI2Loader())}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_1__index__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__ajax__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_3__range__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_4__idtype__=__webpack_require__(43),__WEBPACK_IMPORTED_MODULE_5__datatype__=__webpack_require__(44),__WEBPACK_IMPORTED_MODULE_6__vector_impl__=__webpack_require__(36),__WEBPACK_IMPORTED_MODULE_7__math__=__webpack_require__(47);__webpack_require__.d(__webpack_exports__,"MatrixBase",function(){return MatrixBase}),__webpack_require__.d(__webpack_exports__,"Matrix",function(){return Matrix}),__webpack_exports__.create=create;var MatrixBase=function(_super){function MatrixBase(t){var e=_super.call(this)||this;return e._root=t,e}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(MatrixBase,_super),MatrixBase.prototype.size=function(){throw new Error("not implemented")},Object.defineProperty(MatrixBase.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),Object.defineProperty(MatrixBase.prototype,"length",{get:function(){return this.nrow*this.ncol},enumerable:!0,configurable:!0}),Object.defineProperty(MatrixBase.prototype,"nrow",{get:function(){return this.dim[0]},enumerable:!0,configurable:!0}),Object.defineProperty(MatrixBase.prototype,"ncol",{get:function(){return this.dim[1]},enumerable:!0,configurable:!0}),Object.defineProperty(MatrixBase.prototype,"indices",{get:function(){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.l)([0,this.nrow],[0,this.ncol])},enumerable:!0,configurable:!0}),MatrixBase.prototype.data=function(){throw new Error("not implemented")},MatrixBase.prototype.view=function(){if("string"==typeof arguments[0])return this.dynview(arguments[0]);var t=0===arguments.length?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)():arguments[0];return t.isAll?this._root:new MatrixView(this._root,t)},MatrixBase.prototype.dynview=function(t){return null},MatrixBase.prototype.slice=function(t){return new SliceColVector(this,t)},MatrixBase.prototype.stats=function(){return this.data().then(function(t){return __WEBPACK_IMPORTED_MODULE_7__math__.b.apply(void 0,t)})},MatrixBase.prototype.hist=function(t,e,r){var n=this;void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),void 0===r&&(r=0);var i=this._root.valuetype;return this.data().then(function(e){var o=flatten(e,n.indices,r);switch(i.type){case"categorical":return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__math__.c)(o.data,o.indices,o.data.length,i.categories.map(function(t){return"string"==typeof t?t:t.name}),i.categories.map(function(t){return"string"==typeof t?t:t.name||t.label}),i.categories.map(function(t){return"string"==typeof t?"gray":t.color||"gray"}));case"real":case"int":return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__math__.d)(o.data,o.indices,o.data.length,t||Math.round(Math.sqrt(n.length)),i.range);default:return null}})},MatrixBase.prototype.idView=function(t){var e=this;return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),t.isAll?Promise.resolve(this._root):this.ids().then(function(r){return e.view(r.indexOf(t))})},MatrixBase.prototype.reduce=function(t,e,r,n){return new ProjectedVector(this,t,e,r,n)},MatrixBase.prototype.restore=function(persisted){return persisted&&persisted.f?this.reduce(eval(persisted.f),this,persisted.valuetype,persisted.idtype?__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__idtype__.b)(persisted.idtype):void 0):persisted&&persisted.range?this.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(persisted.range)):persisted&&persisted.transposed?this.t:persisted&&persisted.col?this.slice(+persisted.col):persisted&&persisted.row?this.t.slice(+persisted.row):this},MatrixBase}(__WEBPACK_IMPORTED_MODULE_4__idtype__.d),Matrix=function(t){function e(e,r){var n=t.call(this,null)||this;n.desc=e,n.loader=r,n._root=n;var i=e;return n.valuetype=i.value,n.rowtype=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__idtype__.b)(i.rowtype),n.coltype=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__idtype__.b)(i.coltype),n.producttype_=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__idtype__.e)(n.rowtype,n.coltype),n.t=new TransposedMatrix(n),n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"producttype",{get:function(){return this.producttype_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype,this.coltype]},enumerable:!0,configurable:!0}),e.prototype.at=function(t,e){return this.loader.at(this.desc,t,e)},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.data(this.desc,t)},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.ids(this.desc,t)},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.cols(this.desc,t)},e.prototype.colIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.colIds(this.desc,t)},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.rows(this.desc,t)},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.loader.rowIds(this.desc,t)},e.prototype.hist=function(e,r,n){return void 0===r&&(r=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),void 0===n&&(n=0),this.loader.hist?this.loader.hist(this.desc,r,e):t.prototype.hist.call(this,e,r,n)},e.prototype.size=function(){return this.desc.size},e.prototype.persist=function(){return this.desc.id},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),void 0===e&&(e={}),this.loader.heatmapUrl?this.loader.heatmapUrl(this.desc,t,e):null},e}(MatrixBase),TransposedMatrix=function(t){function e(e){var r=t.call(this,e)||this;return r.t=e,r}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this._root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this._root.persist(),transposed:!0}},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this._root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowtype",{get:function(){return this._root.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coltype",{get:function(){return this._root.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"producttype",{get:function(){return this._root.producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.rowtype,this.coltype]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.t.ids(t?t.swap():void 0).then(function(t){return t.swap()})},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.t.rows(t?t.swap():void 0)},e.prototype.colIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.t.rowIds(t?t.swap():void 0)},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.t.cols(t?t.swap():void 0)},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.t.colIds(t?t.swap():void 0)},e.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),t.isAll?this:new MatrixView(this._root,t.swap()).t},e.prototype.slice=function(t){return new SliceRowVector(this._root,t)},e.prototype.size=function(){var t=this.t.dim;return[t[1],t[0]]},e.prototype.at=function(t,e){return this.t.at(e,t)},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this.t.data(t?t.swap():void 0).then(function(t){return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__datatype__.d)(t)})},e.prototype.hist=function(t,e,r){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),void 0===r&&(r=0),this.t.hist(t,e?e.swap():void 0,1-r)},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),void 0===e&&(e={}),e.transpose=!0!==e.transpose,this.t.heatmapUrl(t?t.swap():void 0,e)},e}(MatrixBase),MatrixView=function(t){function e(r,n,i){void 0===i&&(i=null);var o=t.call(this,r)||this;return o.range=n,o.t=i,o.range=n,n.dim(0),n.dim(1),i||(o.t=new e(r.t,n.swap(),o)),o}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this._root.desc},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this._root.persist(),range:this.range.toString()}},e.prototype.ids=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.ids(this.range.preMultiply(t,this._root.dim))},e.prototype.cols=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.cols(this.range.preMultiply(t,this._root.dim))},e.prototype.colIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.colIds(this.range.preMultiply(t,this._root.dim))},e.prototype.rows=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.rows(this.range.preMultiply(t,this._root.dim))},e.prototype.rowIds=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.rowIds(this.range.preMultiply(t,this._root.dim))},e.prototype.size=function(){return this.range.size(this._root.dim)},e.prototype.at=function(t,e){var r=this.range.invert([t,e],this._root.dim);return this._root.at(r[0],r[1])},e.prototype.data=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),this._root.data(this.range.preMultiply(t,this._root.dim))},e.prototype.hist=function(t,e,r){return void 0===e&&(e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),void 0===r&&(r=0),this._root.hist(t,this.range.preMultiply(e,this._root.dim),r)},e.prototype.heatmapUrl=function(t,e){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),void 0===e&&(e={}),this._root.heatmapUrl(this.range.preMultiply(t,this._root.dim),e)},e.prototype.view=function(t){return void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)()),t.isAll?this:new e(this._root,this.range.preMultiply(t,this.dim))},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this._root.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowtype",{get:function(){return this._root.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coltype",{get:function(){return this._root.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"producttype",{get:function(){return this._root.producttype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return this._root.idtypes},enumerable:!0,configurable:!0}),e}(MatrixBase),SliceColVector=function(t){function e(e,r){var n=t.call(this,null)||this;return n.m=e,n.col=r,n.colRange=__WEBPACK_IMPORTED_MODULE_3__range__.h.from([n.col]),n.desc={name:e.desc.name+"-c"+r,fqname:e.desc.fqname+"-c"+r,id:e.desc.id+"-c"+r,type:"vector",size:n.dim,value:n.valuetype},n._root=n,n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),e.prototype.persist=function(){return{root:this.m.persist(),col:this.col}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t.range))),e},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.m.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.m.rowtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.nrow},e.prototype.names=function(t){return this.m.rows(t)},e.prototype.ids=function(t){return this.m.rowIds(t)},e.prototype.at=function(t){return this.m.at(t,this.col)},e.prototype.data=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)());var e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(t.dim(0),this.colRange);return this.m.data(e).then(function(t){return t.length>0&&Array.isArray(t[0])?t.map(function(t){return t[0]}):t})},e.prototype.sort=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.o)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.p)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e}(__WEBPACK_IMPORTED_MODULE_6__vector_impl__.VectorBase),SliceRowVector=function(t){function e(e,r){var n=t.call(this,null)||this;return n.m=e,n.row=r,n.rowRange=__WEBPACK_IMPORTED_MODULE_3__range__.h.from([n.row]),n.desc={name:e.desc.name+"-r"+r,fqname:e.desc.fqname+"-r"+r,id:e.desc.id+"-r"+r,type:"vector",size:n.dim,value:n.valuetype},n._root=n,n}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),e.prototype.persist=function(){return{root:this.m.persist(),row:this.row}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t.range))),e},Object.defineProperty(e.prototype,"valuetype",{get:function(){return this.m.valuetype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.m.coltype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.ncol},e.prototype.names=function(t){return this.m.cols(t)},e.prototype.ids=function(t){return this.m.colIds(t)},e.prototype.at=function(t){return this.m.at(this.row,t)},e.prototype.data=function(t){void 0===t&&(t=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.c)());var e=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(this.rowRange,t.dim(0));return this.m.data(e).then(function(t){return t[0]})},e.prototype.sort=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.o)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.p)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e}(__WEBPACK_IMPORTED_MODULE_6__vector_impl__.VectorBase),ProjectedVector=function(t){function e(e,r,n,i,o){void 0===n&&(n=e),void 0===i&&(i=e.valuetype),void 0===o&&(o=e.rowtype);var u=t.call(this,null)||this;return u.m=e,u.f=r,u.this_f=n,u.valuetype=i,u._idtype=o,u.desc={name:e.desc.name+"-p",fqname:e.desc.fqname+"-p",type:"vector",id:e.desc.id+"-p",size:u.dim,value:u.valuetype},u._root=u,u}return __WEBPACK_IMPORTED_MODULE_0_tslib__.a(e,t),e.prototype.persist=function(){return{root:this.m.persist(),f:this.f.toString(),valuetype:this.valuetype===this.m.valuetype?void 0:this.valuetype,idtype:this.idtype===this.m.rowtype?void 0:this.idtype.name}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.f)(t.range))),e},Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this._idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.m.nrow},e.prototype.names=function(t){return this.m.rows(t)},e.prototype.ids=function(t){return this.m.rowIds(t)},e.prototype.at=function(t){var e=this;return this.m.data(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(t)).then(function(t){return e.f.call(e.this_f,t[0])})},e.prototype.data=function(t){var e=this;return this.m.data(t).then(function(t){return t.map(e.f,e.this_f)})},e.prototype.sort=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.o)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var r=this;return this.data().then(function(n){var i=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__index__.p)(n,t,e);return r.view(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__range__.d)(i))})},e}(__WEBPACK_IMPORTED_MODULE_6__vector_impl__.VectorBase)},40:function(t,e,r){"use strict";function n(t,e){return r.i(f.k)(t,e.map(function(t){return new f.j(t.name,t.color||"gray",r.i(f.f)(t.range).dim(0))}))}function i(){var t=void 0;return function(e){return t||(t=r.i(p.a)("/dataset/"+e.id).then(function(t){return{rowIds:r.i(f.f)(t.rowIds),rows:t.rows,range:n(e.name,t.groups)}}))}}function o(t,e,n){var i=void 0;return function(o){return i?Promise.resolve(i):(i={rowIds:r.i(f.d)(e),rows:t,range:n},Promise.resolve(i))}}function u(t){return new b(t,i())}function s(t,e,r,n){return new b(t,o(e,r,n))}function a(t){function e(){return Promise.all([t.groups(),t.ids(),t.names()]).then(function(t){return{range:t[0],rowIds:t[1],rows:t[2]}})}var r={id:t.desc.id+"-s",type:"stratification",name:t.desc.name+"-s",fqname:t.desc.fqname+"-s",ngroups:t.desc.value.categories.length,size:t.dim};return new b(r,e)}Object.defineProperty(e,"__esModule",{value:!0});var _=r(3),c=r(1),p=r(12),f=r(42),l=r(43),h=r(44),d=r(51),y=r(36),m=r(47),g=r(49);r.d(e,"Stratification",function(){return b}),r.d(e,"StratificationVector",function(){return v}),e.create=u,e.wrap=s,e.wrapCategoricalVector=a;var b=function(t){function e(e,n){var i=t.call(this,e)||this;i.desc=e,i.loader=n;var o=e;return i._idtype=r.i(l.b)(o.idtype),i}return _.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this._idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.desc.groups},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return new g.a(this,t,this.groups[t])},e.prototype.load=function(){return this.loader(this.desc)},e.prototype.hist=function(t,e){return this.range().then(function(t){return r.i(m.a)(t)})},e.prototype.vector=function(){var t=this;return this._v?this._v:(this._v=this.load().then(function(e){return new v(t,e.range,t.desc)}),this._v)},e.prototype.origin=function(){return"origin"in this.desc?r.i(d.a)(this.desc.origin):Promise.reject("no origin specified")},e.prototype.range=function(){return this.load().then(function(t){return t.range})},e.prototype.idRange=function(){var t=this;return this.load().then(function(e){var r=e.rowIds.dim(0),n=e.range;return r.preMultiply(n,t.dim[0])})},e.prototype.names=function(t){void 0===t&&(t=r.i(f.c)());var e=this;return this.load().then(function(r){return t.filter(r.rows,e.dim)})},e.prototype.ids=function(t){void 0===t&&(t=r.i(f.c)());var e=this;return this.load().then(function(r){return r.rowIds.preMultiply(t,e.dim)})},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return this.desc.size},Object.defineProperty(e.prototype,"length",{get:function(){return this.size()[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return this.desc.ngroups},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e}(h.a),v=function(t){function e(e,r,n){var i=t.call(this,null)||this;return i.strat=e,i.range=r,i._cache=null,i._root=i,i.valuetype={type:"categorical",categories:r.groups.map(function(t){return{name:t.name,label:t.name,color:t.color}})},i.desc={name:n.name,fqname:n.fqname,id:n.id,type:"vector",value:i.valuetype},i}return _.a(e,t),Object.defineProperty(e.prototype,"idtype",{get:function(){return this.strat.idtype},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.strat.persist()}},e.prototype.restore=function(t){var e=this;return t&&t.range&&(e=e.view(r.i(f.f)(t.range))),e},e.prototype.load=function(){if(null!==this._cache)return this._cache;var t=[];return this.range.groups.forEach(function(e){e.forEach(function(){return t.push(e.name)})}),this._cache=Promise.resolve(t)},e.prototype.at=function(t){return this.load().then(function(e){return e[t]})},e.prototype.data=function(t){void 0===t&&(t=r.i(f.c)());var e=this;return this.load().then(function(r){return t.filter(r,e.dim)})},e.prototype.names=function(t){return void 0===t&&(t=r.i(f.c)()),this.strat.names(t)},e.prototype.ids=function(t){return void 0===t&&(t=r.i(f.c)()),this.strat.ids(t)},e.prototype.size=function(){return this.strat.size()},e.prototype.sort=function(t,e){var n=this;return this.data().then(function(i){var o=r.i(c.o)(i,t,e);return n.view(r.i(f.d)(o))})},e.prototype.map=function(t,e){return null},e.prototype.filter=function(t,e){var n=this;return this.data().then(function(i){var o=r.i(c.p)(i,t,e);return n.view(r.i(f.d)(o))})},e}(y.VectorBase)},42:function(t,e,r){"use strict";function n(t,e){return t<0?e+1+t:t}function i(t){return new O("unnamed","gray",t)}function o(t,e){return new P(t,e)}function u(t){if(1===t.length)return t[0];var e=t[0].iter().asList();return t.slice(1).forEach(function(t){t.iter().forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),E.from(e)}function s(){return new w}function a(){var t=new w;return t.dims=[E.none(),E.none()],t}function _(){if(0===arguments.length)return s();var t=new w;return Array.isArray(arguments[0])&&r.i(m.h)(arguments).forEach(function(e,r){0!==e.length&&t.dim(r).setSlice(e[0],e[1],e[2])}),"number"==typeof arguments[0]&&t.dim(0).setSlice(arguments[0],arguments[1],arguments[2]),t}function c(){if(0===arguments.length)return s();var t=new w,e=arguments[0];return Array.isArray(e)||(e=r.i(m.h)(arguments)),t.dims=e.map(function(t){return t.dim(0)}),t}function p(){if(0===arguments.length)return s();var t=new w;return Array.isArray(arguments[0])&&arguments[0][0]instanceof E?t.dims=arguments[0]:Array.isArray(arguments[0])?r.i(m.h)(arguments).forEach(function(e,r){e instanceof E?t.dims[r]=e:t.dim(r).setList(e)}):"number"==typeof arguments[0]?t.dim(0).setList(r.i(m.h)(arguments)):arguments[0]instanceof E&&(t.dims=r.i(m.h)(arguments)),t}function f(t){var e,r,n=0,i=new Array;for(t=t.trim();n<t.length;)switch(e=t.charAt(n)){case'"':r=l(t,n),n=r.act+1,i.push(r.dim);break;case",":n++,i.push(E.all());break;default:e.match(/\s/)?n++:(r=h(t,n),n=r.act+1,i.push(r.dim))}return","===t.charAt(t.length-1)&&i.push(E.all()),new w(i)}function l(t,e){e+=1;var r,n=t.indexOf('"',e),i=t.slice(e,n);switch(e=n+1,t.charAt(e)){case'"':return n=t.indexOf('"',e+1),r=h(t,n+1),{dim:new O(i,t.slice(e+1,n),r.dim),act:r.act};case"{":for(var o=[];"}"!==t.charAt(e);)r=l(t,e+1),o.push(r.dim),e=r.act;return{dim:new P(i,o),act:r.act+1};default:return{dim:E.all(),act:e}}}function h(t,e){var r,n=new E;switch(t.charAt(e)){case",":case"}":r=e,n=E.all();break;case"(":r=t.indexOf(")",e),r>e+1&&n.push.apply(n,t.slice(e+1,r).split(",").map(b.parse)),r+=1;break;default:r=t.indexOf("}",e);var i=t.indexOf(",",e);r>=0&&i>=0?r=Math.min(r,i):r<0&&(r=i),r<0&&(r=t.length),n=new E([b.parse(t.slice(e,r))])}return{act:r,dim:n}}function d(t){return void 0===t&&(t=null),null===t?s():t instanceof w?t:Array.isArray(t)?Array.isArray(t[0])?p.apply(void 0,t):p(t):f(r.i(m.h)(arguments).map(String).join(","))}var y=r(3),m=r(1),g=r(45);r.d(e,"h",function(){return E}),r.d(e,"j",function(){return O}),e.b=i,e.k=o,r.d(e,"a",function(){return P}),r.d(e,"g",function(){return w}),e.c=s,e.e=a,e.l=_,e.i=c,e.d=p,e.f=d;var b=function(){function t(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=1),this.from=t,this.to=e,this.step=r}return Object.defineProperty(t.prototype,"isAll",{get:function(){return 0===this.from&&-1===this.to&&1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return this.from+this.step===this.to},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.from<0||this.to<0},enumerable:!0,configurable:!0}),t.all=function(){return new t(0,-1,1)},t.none=function(){return new t(0,0,1)},t.single=function(t){return new v(t)},t.range=function(e,r,n){return void 0===r&&(r=-1),void 0===n&&(n=1),e+n===r?t.single(e):new t(e,r,n)},t.prototype.size=function(t){var e=n(this.to,t),r=n(this.from,t);if(1===this.step)return Math.max(e-r,0);if(-1===this.step)return Math.max(r-e,0);var i=this.step>0?e-r+1:r-e+1,o=Math.abs(this.step);return i<=0?0:Math.floor(i/o)},t.prototype.clone=function(){return new t(this.from,this.to,this.step)},t.prototype.reverse=function(){var e=this.from<0?this.from:this.from+1;return new t(this.to<0?this.to:this.to-1,e,-this.step)},t.prototype.invert=function(t,e){return this.isAll?t:n(this.from,e)+t*this.step},t.prototype.iter=function(t){return r.i(g.a)(n(this.from,t),n(this.to,t),this.step)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){var r=n(this.from,e),i=n(this.to,e);return-1===this.step?t<=r&&t>i:t>=r&&t<i},t.prototype.toString=function(){if(this.isAll)return"";if(this.isSingle)return this.from.toString();var t=this.from+":"+this.to;return 1!==this.step&&(t+=":"+this.step),t},t.parse=function(e){if(0===e.length)return t.all();var r=e.split(":");return 1===r.length?t.single(parseFloat(r[0])):2===r.length?new t(parseFloat(r[0]),parseFloat(r[1])):new t(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]))},t}(),v=function(){function t(t){this.from=t}return Object.defineProperty(t.prototype,"step",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this.from+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAll",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.size=function(t){return 1},t.prototype.clone=function(){return new t(this.from)},t.prototype.contains=function(t,e){return n(this.from,e)===t},t.prototype.reverse=function(){return this.clone()},t.prototype.invert=function(t,e){return n(this.from,e)+t},t.prototype.iter=function(t){return r.i(g.b)(n(this.from,t))},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.from.toString()},t}(),E=function(){function t(e){e instanceof t?this.arr=e.arr:Array.isArray(e)?this.arr=e:this.arr=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.size()},enumerable:!0,configurable:!0}),t.all=function(){return new t([b.all()])},t.single=function(e){return new t([b.single(e)])},t.none=function(){return new t},t.from=function(e){return new t(t.compress(e))},t.compress=function(t){if(0===t.length)return[];if(1===t.length)return[b.single(t[0])];for(var e=new Array,r=t.slice(1).map(function(e,r){return e-t[r]}),n=0,i=1,o=0;i<t.length;){for(;r[n]===r[i-1]&&i<t.length;)i++;if(i===n+1)e.push(b.single(t[n]));else if(1===Math.abs(r[n]))e.push(b.range(t[n],t[i-1]+r[n],r[n]));else for(o=n;o<i;o++)e.push(b.single(t[o]));n=i,i+=1}for(;n<t.length;)e.push(b.single(t[n++]));return e},Object.defineProperty(t.prototype,"isAll",{get:function(){return 1===this.arr.length&&this.at(0).isAll},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return 0===this.arr.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.arr.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isList",{get:function(){return this.arr.every(function(t){return t.isSingle})},enumerable:!0,configurable:!0}),t.prototype.push=function(){function t(t){return"string"==typeof t?b.parse(t.toString()):"number"==typeof t?b.single(t):Array.isArray(t)?new b(t[0],t[1],t[2]):t}for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.arr.push.apply(this.arr,e.map(t))},t.prototype.pushSlice=function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=1),this.arr.push(new b(t,e,r))},t.prototype.pushList=function(e){this.arr.push.apply(this.arr,t.compress(e))},t.prototype.setSlice=function(t,e,r){void 0===e&&(e=-1),void 0===r&&(r=1),this.arr.length=0,this.pushSlice(t,e,r)},t.prototype.setList=function(t){this.arr.length=0,this.pushList(t)},t.prototype.at=function(t){return t<0&&(t+=this.length),t<0||t>=this.arr.length?b.none():this.arr[t]},t.prototype.size=function(t){return this.arr.map(function(e){return e.size(t)}).reduce(function(t,e){return t+e},0)},Object.defineProperty(t.prototype,"isIdentityRange",{get:function(){return 1===this.arr.length&&0===this.arr[0].from&&1===this.arr[0].step},enumerable:!0,configurable:!0}),t.prototype.repeat=function(e){if(void 0===e&&(e=1),1===e)return this;for(var r=this.arr.slice(),n=1;n<e;++n)r.push.apply(r,this.arr);return new t(r)},t.prototype.preMultiply=function(e,r){if(this.isAll)return e.clone();if(e.isAll)return this.clone();if(e.isNone||this.isNone)return t.none();if(this.isIdentityRange)return e.clone();var n=this.iter(r).asList(),i=function(t){var e=t.iter(n.length),r=[];return e.forEach(function(t){t>=0&&t<n.length&&r.push(n[t])}),t.fromLike(r)};return e instanceof P?o(e.name,e.groups.map(i)):i(e)},t.prototype.union=function(t,e){if(this.isAll||t.isNone)return this.clone();if(t.isAll||this.isNone)return t.clone();var r=this.iter(e).asList();return t.iter(e).forEach(function(t){r.indexOf(t)<0&&r.push(t)}),t.fromLike(r.sort())},t.prototype.intersect=function(e,r){if(this.isNone||e.isNone)return t.none();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var n=this.iter(r).asList(),i=e.iter(r),o=[];return i.forEach(function(t){n.indexOf(t)>=0&&o.push(t)}),e.fromLike(o.sort())},t.prototype.toSet=function(t){return this.removeDuplicates(t)},t.prototype.without=function(e,r){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return t.none();var n=this.iter(r),i=e.iter(r).asList(),o=[];return n.forEach(function(t){i.indexOf(t)<0&&o.push(t)}),t.from(o.sort())},t.prototype.clone=function(){return new t(this.arr.map(function(t){return t.clone()}))},t.prototype.invert=function(t,e){if(this.isAll)return t;if(this.isNone)return-1;for(var r=0,n=this.arr[0].size(e),i=n;i>t&&r<this.length;)r++,n=this.arr[r].size(e),i+=n;return r>=this.arr.length?-1:this.arr[r-1].invert(t-i+n,e)},t.prototype.indexOf=function(){if(arguments[0]instanceof w)return this.indexRangeOf(arguments[0],arguments[1]);var t,e=this.iter().asList();if(1===arguments.length){if("number"==typeof arguments[0])return e.indexOf(arguments[0]);t=arguments[0]}else t=r.i(m.h)(arguments);return 0===t.length?[]:t.map(function(t,r){return e.indexOf(t)})},t.prototype.indexRangeOf=function(e,r){if(e.isNone||this.isNone)return e.fromLike([]);if(e.isAll)return t.all();var n;if(this.isIdentityRange){var i=this.arr[0].to;n=function(t,e){t>=0&&t<i&&e.push(t)}}else{var u=this.iter().asList();n=function(t,e){var r=u.indexOf(t);r>=0&&e.push(r)}}if(e instanceof P)return o(e.name,e.groups.map(function(t){var e=[];return t.forEach(function(t){return n(t,e)}),t.fromLike(e)}));var s=[];return e.forEach(function(t){return n(t,s)}),e.fromLike(s)},t.prototype.filter=function(t,e,r){if(void 0===r&&(r=m.i),this.isAll)return t.map(r);var n=this.iter(e);if(n.byOne&&n instanceof g.c)return t.slice(n.from,n.to).map(r);for(var i=[];n.hasNext();)i.push(r(t[n.next()]));return i},t.prototype.iter=function(t){if(this.isList)return r.i(g.d)(this.arr.map(function(t){return t.from}));var e=this.arr.map(function(e){return e.iter(t)});return g.e.apply(null,e)},Object.defineProperty(t.prototype,"__iterator__",{get:function(){return this.iter()},enumerable:!0,configurable:!0}),t.prototype.asList=function(t){return this.iter(t).asList()},Object.defineProperty(t.prototype,"first",{get:function(){return this.isNone?null:this.arr[0].from},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.isNone?null:this.arr[this.arr.length-1].from},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.iter().forEach(t,e)},t.prototype.contains=function(t,e){return this.arr.some(function(r){return r.contains(t,e)})},t.prototype.sort=function(t){void 0===t&&(t=function(t,e){return t-e});var e=this.iter().asList(),r=e.sort(t);return this.fromLike(r)},t.prototype.removeDuplicates=function(e){var r=this.iter().asList();return r=r.sort(),r=r.filter(function(t,e){return t!==r[e-1]}),t.from(r)},t.prototype.reverse=function(){var e=this.arr.map(function(t){return t.reverse()});return e.reverse(),new t(e)},t.prototype.toString=function(){return this.isAll?"":1===this.length?this.arr[0].toString():"("+this.arr.join(",")+")"},t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.fromLike=function(e){return t.from(e)},t}(),O=function(t){function e(e,r,n){var i=t.call(this,n)||this;return i.name=e,i.color=r,i}return y.a(e,t),e.prototype.preMultiply=function(r,n){var i=t.prototype.preMultiply.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.union=function(r,n){var i=t.prototype.union.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.intersect=function(r,n){var i=t.prototype.intersect.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.without=function(r,n){var i=t.prototype.without.call(this,r,n);return new e(this.name,this.color,i)},e.prototype.clone=function(){return new e(this.name,this.color,t.prototype.clone.call(this))},e.prototype.toString=function(){return'"'+this.name+'""'+this.color+'"'+t.prototype.toString.call(this)},e.prototype.toSet=function(r){return new e(this.name,this.color,t.prototype.toSet.call(this,r))},e.prototype.fromLike=function(r){return new e(this.name,this.color,t.prototype.fromLike.call(this,r))},e}(E),P=function(t){function e(e,r,n){var i=t.call(this,n||u(r))||this;return i.name=e,i.groups=r,i}return y.a(e,t),e.prototype.preMultiply=function(r,n){var i=this.groups.length>1?t.prototype.preMultiply.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.preMultiply(r,n)}),i)},e.prototype.union=function(r,n){var i=this.groups.length>1?t.prototype.union.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.union(r,n)}),i)},e.prototype.intersect=function(r,n){var i=this.groups.length>1?t.prototype.intersect.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.intersect(r,n)}),i)},e.prototype.without=function(r,n){var i=this.groups.length>1?t.prototype.without.call(this,r,n):void 0;return new e(this.name,this.groups.map(function(t){return t.without(r,n)}),i)},e.prototype.clone=function(){var r=this.groups.length>1?t.prototype.clone.call(this):void 0;return new e(name,this.groups.map(function(t){return t.clone()}),r)},e.prototype.sort=function(r){var n=this.groups.length>1?t.prototype.sort.call(this,r):void 0;return new e(this.name,this.groups.map(function(t){return t.sort(r)}),n)},e.prototype.toSet=function(r){var n=this.groups.length>1?t.prototype.toSet.call(this,r):void 0;return new e(this.name,this.groups.map(function(t){return t.toSet(r)}),n)},e.prototype.toString=function(){return'"'+this.name+'"{'+this.groups.join(",")+"}"},e}(E),w=function(){function t(t){void 0===t&&(t=new Array),this.dims=t}return Object.defineProperty(t.prototype,"isAll",{get:function(){return this.dims.every(function(t){return t.isAll})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNone",{get:function(){return this.dims.every(function(t){return t.isNone})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnbound",{get:function(){return this.dims.some(function(t){return t.isUnbound})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this.dim(0).first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.dim(0).last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ndim",{get:function(){return this.dims.length},enumerable:!0,configurable:!0}),t.prototype.eq=function(t){return!!(this===t||this.isAll&&t.isAll||this.isNone&&t.isNone)||this.toString()===t.toString()},t.prototype.preMultiply=function(e,r){if(this.isAll)return e.clone();if(e.isAll)return this.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.preMultiply(e.dim(i),r?r[i]:void 0)}),n},t.prototype.union=function(e,r){if(this.isAll||e.isNone)return this.clone();if(e.isAll||this.isNone)return e.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.union(e.dim(i),r?r[i]:void 0)}),n},t.prototype.intersect=function(e,r){if(this.isNone||e.isNone)return a();if(this.isAll)return e.clone();if(e.isAll)return this.clone();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.intersect(e.dim(i),r?r[i]:void 0)}),n},t.prototype.without=function(e,r){if(this.isNone||e.isNone)return this.clone();if(e.isAll)return a();var n=new t;return this.dims.forEach(function(t,i){n.dims[i]=t.without(e.dim(i),r?r[i]:void 0)}),n},t.prototype.clone=function(){var e=new t;return this.dims.forEach(function(t,r){e.dims[r]=t.clone()}),e},t.prototype.swap=function(){var e=new t;return e.dims=this.dims.map(function(t){return t.clone()}).reverse(),e},t.prototype.filter=function(t,e){function r(t){if(t>=n)return m.i;var o=i.dim(t),u=r(t+1),s=e?e[t]:void 0;return function(t){return Array.isArray(t)?o.filter(t,s,u):t}}if(this.isAll)return t;var n=this.ndim,i=this;return r(0)(t)},t.prototype.dim=function(t){var e=this.dims[t];return e||(this.dims[t]=E.all(),this.dims[t])},t.prototype.invert=function(t,e){var r=this;return this.isAll?t:t.map(function(t,n){return r.dim(n).invert(t,e?e[n]:void 0)})},t.prototype.indexRangeOf=function(e,r){return e.isNone||this.isNone?a():this.isNone||e.isAll?this.clone():new t(this.dims.map(function(t,n){return t.indexRangeOf(e.dim(n),r?r[n]:void 0)}))},t.prototype.indexOf=function(){var e=this;if(arguments[0]instanceof t)return this.indexRangeOf(arguments[0],arguments[1]);var n;if(1===arguments.length){if("number"==typeof arguments[0])return this.dim(0).indexOf(arguments[0]);n=arguments[0]}else n=r.i(m.h)(arguments);return 0===n.length?[]:n.map(function(t,r){return e.dim(r).indexOf(t)})},t.prototype.size=function(t){return this.isAll?t:this.dims.map(function(e,r){return e.size(t?t[r]:void 0)})},t.prototype.split=function(){return this.dims.map(function(e){return new t([e])})},t.prototype.product=function(t,e){var r=this,n=this.ndim,i=function(o){var u=o.length;if(u<n){r.dims[u].iter(e?e[u]:null).forEach(function(t){o.push(t),i(o),o.pop()})}else t(o.slice())};i([])},t.prototype.toString=function(){return this.dims.map(function(t){return t.toString()}).join(",")},t}()},43:function(t,e,r){"use strict";function n(t,e,r){if(0===e.ndim)return!0;for(var n=0;n<Math.min(t.ndim,r);++n){var i=t.dim(n),o=e.dim(n);if(o.isAll||i.isAll)return!0;if(!i.isUnbound&&i.asList().every(function(t){return!o.contains(t)}))return!1}return!1}function i(t,e,r){if(0===e.length)return t;var i=[];return t.forEach(function(t){e.some(function(e){return e.eq(t)})||e.some(function(e){return n(t,e,r)})||i.push(t)}),i}function o(t){if(!t)return g.SET;if("string"==typeof t)switch(t.toLowerCase()){case"add":return g.ADD;case"remove":return g.REMOVE;default:return g.SET}return+t}function u(t,e){for(;t.ndim<e;)t.dims[t.ndim]=m.h.none();return t}function s(t){t.forEach(function(t){var e=b[t.id],n=!1;e?e instanceof O&&(e.name=t.name,e.names=t.names):(e=new O(t.id,t.name,t.names),n=!0),b[t.id]=e,n&&r.i(y.b)("register.idtype",e)})}function a(){v||(v=!0,r.i(d.a)("/idtype",{},[]).then(function(t){return s(t),b}))}function _(t){return"y"===t[t.length-1]?t.slice(0,t.length-1)+"ies":t+"s"}function c(t){return t instanceof O?t:f(t,new O(t,t,_(t)))}function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new P(t);return f(r.id,r)}function f(t,e){return a(),b.hasOwnProperty(t)?b[t]:(b[t]=e,r.i(y.b)("register.idtype",e),e)}var l=r(3),h=r(1),d=r(12),y=r(46),m=r(42);r.d(e,"c",function(){return g}),r.d(e,"a",function(){return w}),r.d(e,"d",function(){return M}),e.b=c,e.e=p;var g,b={},v=!1,E="selected";!function(t){t[t.SET=0]="SET",t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE"}(g||(g={}));var O=function(t){function e(e,r,n,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.id=e,o.name=r,o.names=n,o.internal=i,o.sel={},o.name2id_cache={},o.id2name_cache={},o.canBeMappedTo=null,o}return l.a(e,t),e.prototype.persist=function(){var t=this,e={};return Object.keys(this.sel).forEach(function(r){return e[r]=t.sel[r].toString()}),{sel:e,name:this.name,names:this.names}},e.prototype.restore=function(t){var e=this;return this.name=t.name,this.names=t.names,Object.keys(t.sel).forEach(function(n){return e.sel[n]=r.i(m.f)(t.sel[n])}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Object.keys(this.sel)},e.prototype.selections=function(t){return void 0===t&&(t=E),this.sel.hasOwnProperty(t)?this.sel[t]:this.sel[t]=r.i(m.e)()},e.prototype.select=function(){var t=r.i(h.h)(arguments),e="string"==typeof t[0]?t.shift():E,n=r.i(m.f)(t[0]),i=o(t[1]);return this.selectImpl(n,i,e)},e.prototype.selectImpl=function(t,e,n){void 0===e&&(e=g.SET),void 0===n&&(n=E);var i=this.selections(n),o=r.i(m.e)();switch(e){case g.SET:o=t;break;case g.ADD:o=i.union(t);break;case g.REMOVE:o=i.without(t)}if(i.eq(o))return i;this.sel[n]=o;var u=e!==g.REMOVE?t:r.i(m.e)(),s=e===g.ADD?r.i(m.e)():e===g.SET?i:t;return this.fire("select",n,o,u,s,i),this.fire("select-"+n,o,u,s,i),i},e.prototype.clear=function(t){return void 0===t&&(t=E),this.selectImpl(r.i(m.e)(),g.SET,t)},e.prototype.fillMapCache=function(t,e){var r=this;t.forEach(function(t,n){var i=e[n];r.name2id_cache[i]=t,r.id2name_cache[t]=i})},e.prototype.getCanBeMappedTo=function(){return null===this.canBeMappedTo&&(this.canBeMappedTo=r.i(d.a)("/idtype/"+this.id+"/").then(function(t){return t.map(c)})),this.canBeMappedTo},e.prototype.mapToFirstName=function(t,e){var n=c(e),i=t instanceof m.g?t:r.i(m.d)(t);return r.i(d.a)("/idtype/"+this.id+"/"+n.id,{ids:i.toString(),mode:"first"})},e.prototype.mapToName=function(t,e){var n=c(e),i=t instanceof m.g?t:r.i(m.d)(t);return r.i(d.a)("/idtype/"+this.id+"/"+n.id,{ids:i.toString()})},e.prototype.mapToFirstID=function(t,e){var n=c(e),i=t instanceof m.g?t:r.i(m.d)(t);return r.i(d.a)("/idtype/"+this.id+"/"+n.id+"/map",{ids:i.toString(),mode:"first"})},e.prototype.mapToID=function(t,e){var n=c(e),i=t instanceof m.g?t:r.i(m.d)(t);return r.i(d.a)("/idtype/"+this.id+"/"+n.id+"/map",{ids:i.toString()})},e.prototype.map=function(t){var e=this,n=t.filter(function(t){return!(t in e.name2id_cache)});return 0===n.length?Promise.resolve(t.map(function(t){return e.name2id_cache[t]})):r.i(d.a)("/idtype/"+this.id+"/map",{ids:n}).then(function(r){return n.forEach(function(t,n){e.name2id_cache[t]=r[n]}),t.map(function(t){return e.name2id_cache[t]})})},e.prototype.unmap=function(t){var e=this,n=t instanceof m.g?t:r.i(m.d)(t),i=[];if(n.dim(0).forEach(function(t){return t in e.id2name_cache?null:i.push(t)}),0===i.length){var o=[];return n.dim(0).forEach(function(t){return o.push(e.id2name_cache[t])}),Promise.resolve(o)}return r.i(d.a)("/idtype/"+this.id+"/unmap",{ids:r.i(m.d)(i).toString()}).then(function(t){i.forEach(function(r,n){e.id2name_cache[r]=t[n]});var r=[];return n.dim(0).forEach(function(t){return r.push(e.id2name_cache[t])}),r})},e}(y.a),P=function(t){function e(e,r){void 0===r&&(r=!1);var n=t.call(this)||this;return n.elems=e,n.internal=r,n.sel={},n.isOn=!1,n.selectionListener=function(t,e,r,i,o){n.fire("selectDim,selectProduct",n.elems.indexOf(t.currentTarget),e,r,i,o),n.fire("selectDim-"+e+",selectProduct-"+e,n.elems.indexOf(t.currentTarget),r,i,o)},n}return l.a(e,t),e.prototype.on=function(e,r){return this.isOn||(this.enable(),this.isOn=!0),t.prototype.on.call(this,e,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.elems.map(function(t){return t.id}).join("X")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.elems.map(function(t){return t.name}).join(" x ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"names",{get:function(){return this.elems.map(function(t){return t.names}).join(" x ")},enumerable:!0,configurable:!0}),e.prototype.enable=function(){var t=this;this.elems.forEach(function(e){return e.on("select",t.selectionListener)})},e.prototype.disable=function(){var t=this;this.elems.forEach(function(e){return e.off("select",t.selectionListener)})},e.prototype.persist=function(){var t=this,e={};return Object.keys(this.sel).forEach(function(r){return e[r]=t.sel[r].map(function(t){return t.toString()})}),{sel:e}},e.prototype.restore=function(t){var e=this;return Object.keys(t.sel).forEach(function(r){return e.sel[r]=t.sel[r].map(m.f)}),this},e.prototype.toString=function(){return this.name},e.prototype.selectionTypes=function(){return Object.keys(this.sel)},e.prototype.selections=function(t){return void 0===t&&(t=E),this.sel.hasOwnProperty(t)?this.sel[t].slice():(this.sel[t]=[],[])},e.prototype.productSelections=function(t){var e=this;void 0===t&&(t=E);var n=this.selections(t),i=this.toPerDim(n);return this.elems.forEach(function(o,u){var s=o.selections(t),a=s.without(i[u]);a.isNone||n.push(r.i(m.d)(e.elems.map(function(t){return o===t?a.dim(0):m.h.all()})))}),n},e.prototype.select=function(){var t=r.i(h.h)(arguments),e="string"==typeof t[0]?t.shift():E,n=t[0].map(m.f),i=o(t[1]);return this.selectImpl(n,i,e)},e.prototype.selectImpl=function(t,e,r){void 0===e&&(e=g.SET),void 0===r&&(r=E);var n=t.map(m.f),o=this.selections(r),u=[];switch(e){case g.SET:u=n;break;case g.ADD:u=o.concat(n);break;case g.REMOVE:u=i(o,n,this.elems.length)}this.sel[r]=u;var s=this.toPerDim(u);this.disable(),this.elems.forEach(function(t,e){return t.select(r,s[e])}),this.enable();var a=e!==g.REMOVE?n:[],_=e===g.ADD?[]:e===g.SET?o:n;return this.fire("select",r,u,a,_,o),this.fire("selectProduct",-1,r,u,a,_,o),this.fire("select-"+r,u,a,_,o),this.fire("selectProduct-"+r,-1,u,a,_,o),o},e.prototype.toPerDim=function(t){return this.elems.map(function(e,n){if(0===t.length)return r.i(m.e)();var i=t.map(function(t){return t.dim(n)}),o=i.reduce(function(t,e){return t?t.union(e):e},null);return r.i(m.d)(o)})},e.prototype.clear=function(t){return void 0===t&&(t=E),this.selectImpl([],g.SET,t)},e}(y.a),w=(function(t){function e(e,r){var n=t.call(this,e,r,r+"s",!0)||this;return n.instances=[],n.pool=new h.l,n}l.a(e,t),e.prototype.nextId=function(t){var e=this.pool.checkOut();return t&&(t.id=e,this.instances[e]=t,this.fire("add",e,t)),e},e.prototype.push=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach(function(e){t.instances[e.id]=e,t.fire("add",e.id,e)})},e.prototype.byId=function(t){return this.instances[t]},e.prototype.forEach=function(t,e){var r=this;this.instances.forEach(function(n,i){return r.pool.isCheckedOut(i)?t.call(e,n):null})},Object.defineProperty(e.prototype,"entries",{get:function(){var t=this;return this.instances.filter(function(e,r){return t.pool.isCheckedOut(r)})},enumerable:!0,configurable:!0}),e.prototype.remove=function(t){var e=this,r=null;return"number"==typeof t.id&&(t=t.id),"number"==typeof t&&(r=this.instances[t],delete this.instances[t],this.fire("remove",t,r)),this.selectionTypes().forEach(function(r){e.select(r,[t],g.REMOVE)}),this.pool.checkIn(t),r},e.prototype.selectedObjects=function(t){return void 0===t&&(t=E),this.selections(t).filter(this.instances)}}(O),function(){function t(){this.pool=new h.l,this.lookup={}}t.prototype.unmapOne=function(t){return this.unmap([t])[0]},t.prototype.unmap=function(t){var e=this,r=Object.keys(this.lookup);return t.map(function(t){for(var n in r)if(e.lookup[n]===t)return n;return null})},t.prototype.mapOne=function(t){return t in this.lookup?this.lookup[t]:(this.lookup[t]=this.pool.checkOut(),this.lookup[t])},t.prototype.map=function(t){var e=this,r=t.map(function(t){return e.mapOne(t)});return m.d.apply(void 0,r)}}(),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numSelectListeners=0,e.selectionListeners=[],e.singleSelectionListener=function(t,r,n,i,o){e.ids().then(function(t){n=t.indexOf(n),i=t.indexOf(i),o=t.indexOf(o),n.isNone&&i.isNone&&o.isNone||(u(n,t.ndim),u(i,t.ndim),u(o,t.ndim),e.fire("select",r,n,i,o),e.fire("select-"+r,n,i,o))})},e.selectionCache=[],e.accumulateEvents=-1,e}return l.a(e,t),e.prototype.ids=function(t){throw new Error("not implemented")},e.prototype.fromIdRange=function(t){return void 0===t&&(t=r.i(m.c)()),this.ids().then(function(e){return e.indexOf(t)})},Object.defineProperty(e.prototype,"idtypes",{get:function(){throw new Error("not implemented")},enumerable:!0,configurable:!0}),e.prototype.selectionListener=function(t,e,r){var n=this;return function(t,i,o,u,s){n.selectionCache[e]={act:o,added:u,removed:s},(n.accumulateEvents<0||++n.accumulateEvents===r)&&n.fillAndSend(i,e)}},e.prototype.fillAndSend=function(t,e){var n=this,i=this.idtypes,o=i.map(function(e,i){var o=n.selectionCache[i];return o||{act:e.selections(t),added:r.i(m.e)(),removed:r.i(m.e)()}}),s=r.i(m.i)(o.map(function(t){return t.act})),a=r.i(m.i)(o.map(function(t){return t.added})),_=r.i(m.i)(o.map(function(t){return t.removed}));this.selectionCache=[],this.accumulateEvents=-1,this.ids().then(function(e){s=e.indexOf(s),a=e.indexOf(a),_=e.indexOf(_),s.isNone&&a.isNone&&_.isNone||(u(s,e.ndim),u(a,e.ndim),u(_,e.ndim),n.fire("select",t,s,a,_),n.fire("select-"+t,s,a,_))})},e.prototype.on=function(e,r){var n=this;if("string"==typeof e&&("select"===e||"select-"===e.slice(0,"select-".length))&&1===++this.numSelectListeners){var i=this.idtypes;1===i.length?(this.selectionListeners.push(this.singleSelectionListener),i[0].on("select",this.singleSelectionListener)):i.forEach(function(t,e){var r=n.selectionListener(t,e,i.length);n.selectionListeners.push(r),t.on("select",r)})}return t.prototype.on.call(this,e,r)},e.prototype.off=function(e,r){var n=this;return("string"==typeof e&&"select"===e||"select-"===e.match("^select-"))&&0===--this.numSelectListeners&&(this.idtypes.forEach(function(t,e){return t.off("select",n.selectionListeners[e])}),this.selectionListeners=[]),t.prototype.off.call(this,e,r)},e.prototype.selections=function(t){var e=this;return void 0===t&&(t=E),this.ids().then(function(n){var i=r.i(m.i)(e.idtypes.map(function(e){return e.selections(t)}));return n.indexRangeOf(i)})},e.prototype.select=function(){var t=r.i(h.h)(arguments),e="number"==typeof t[0]?+t.shift():-1,n="string"==typeof t[0]?t.shift():E,i=r.i(m.f)(t[0]),u=o(t[1]);return this.selectImpl(i,u,n,e)},e.prototype.selectImpl=function(t,e,n,i){var o=this;return void 0===e&&(e=g.SET),void 0===n&&(n=E),void 0===i&&(i=-1),this.ids().then(function(u){var s=o.idtypes;if(-1===i){t=u.preMultiply(t),o.accumulateEvents=0;var a=r.i(m.i)(t.split().map(function(t,r){return s[r].select(n,t,e)}));for(o.accumulateEvents>0&&o.fillAndSend(n,-1);a.ndim<s.length;)a.dim(a.ndim);return u.indexRangeOf(a)}return u=u.split()[i],t=u.preMultiply(t),s[i].select(n,t,e),u.indexRangeOf(t)})},e.prototype.clear=function(){var t=r.i(h.h)(arguments),e="number"==typeof t[0]?+t.shift():-1,n="string"==typeof t[0]?t[0]:E;return this.selectImpl(r.i(m.e)(),g.SET,n,e)},e}(y.a)),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numProductSelectListeners=0,e.productSelectionListener=function(t,r,n){var i=e.producttype.productSelections(n);if(0===i.length)return e.fire("selectProduct",n,[]),void e.fire("selectProduct-"+n,[]);e.ids().then(function(t){var r=i.map(function(e){return t.indexOf(e)}).filter(function(t){return!t.isNone});0!==r.length&&(r.forEach(function(e){return u(e,t.ndim)}),e.fire("selectProduct",n,r),e.fire("selectProduct-"+n,r))})},e}return l.a(e,t),Object.defineProperty(e.prototype,"producttype",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.on=function(e,r){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||1===++this.numProductSelectListeners&&this.producttype.on("selectProduct",this.productSelectionListener),t.prototype.on.call(this,e,r)},e.prototype.off=function(e,r){return"string"!=typeof e||"select"!==e&&"selectProduct"!==e&&"select-"!==e.slice(0,"select-".length)||0===--this.numProductSelectListeners&&this.producttype.off("selectProduct",this.productSelectionListener),t.prototype.off.call(this,e,r)},e.prototype.productSelections=function(t){var e=this;return void 0===t&&(t=E),this.ids().then(function(r){var n=e.producttype.productSelections(t),i=n.map(function(t){return r.indexRangeOf(t)}).filter(function(t){return!t.isNone});return i.forEach(function(t){return u(t,r.ndim)}),i})},e.prototype.selectProduct=function(){var t=r.i(h.h)(arguments),e="string"==typeof t[0]?t.shift():E,n=t[0].map(m.f),i=o(t[1]);return this.selectProductImpl(n,i,e)},e.prototype.selectProductImpl=function(t,e,r){var n=this;return void 0===e&&(e=g.SET),void 0===r&&(r=E),this.ids().then(function(i){t=t.map(function(t){return i.preMultiply(t)}),n.producttype.select(r,t,e)})},e.prototype.clear=function(){var t=r.i(h.h)(arguments);"number"==typeof t[0]&&t.shift();var e="string"==typeof t[0]?t[0]:E;return this.selectProductImpl([],g.SET,e||E)},e}(w)},44:function(t,e,r){"use strict";function n(t){if(0===t.length||0===t[0].length)return[];for(var e=t[0].map(function(t){return[t]}),r=1;r<t.length;++r)t[r].forEach(function(t,r){return e[r].push(t)});return e}function i(t,e){if(Array.isArray(t)){var r=t;if(r.indexOf(e)>=0)return r.map(function(t){return t===e?NaN:t})}return t===e?NaN:t}function o(t,e){return"int"===e.type&&"missing"in e?i(t,e.missing):t}function u(t,e,n){void 0===n&&(n={});var i=r.i(a.a)({skipEmptyCategories:!0,colors:["gray"],labels:null,name:"Partitioning"},n),o=e.map(function(t,e){return{name:i.labels?i.labels[e]:t,color:i.colors[Math.min(e,i.colors.length-1)],indices:[]}});t.forEach(function(t,r){var n=e.indexOf(t);n>=0&&o[n].indices.push(r)}),i.skipEmptyCategories&&(o=o.filter(function(t){return t.indices.length>0}));var u=o.map(function(t){return new c.j(t.name,t.color,c.h.from(t.indices))});return r.i(c.k)(i.name,u)}var s=r(3),a=r(1),_=r(43),c=r(42);r.d(e,"a",function(){return p}),e.d=n,e.c=o,e.b=u;var p=function(t){function e(e){var r=t.call(this)||this;return r.desc=e,r}return s.a(e,t),Object.defineProperty(e.prototype,"dim",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.ids=function(t){return void 0===t&&(t=r.i(c.c)()),Promise.resolve(r.i(c.e)())},e.prototype.idView=function(t){return Promise.resolve(this)},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return this.desc.id},e.prototype.restore=function(t){return this},e.prototype.toString=function(){return this.persist()},e}(_.a)},45:function(t,e,r){"use strict";function n(){return new h}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?n():1===t.length?t[0]:new l(t)}function o(t,e,r){return new c(t,e,r)}function u(t){return new f(t)}function s(t){return new p(t)}var a=r(3);r.d(e,"c",function(){return c}),e.e=i,e.a=o,e.b=u,e.d=s;var _=function(){function t(){}return t.prototype.hasNext=function(){return!1},t.prototype.next=function(){return null},t.prototype.forEach=function(t,e){for(var r=0;this.hasNext();)t.call(e,this.next(),r++)},t.prototype.map=function(t,e){return new d(this,t,e)},t.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(t.prototype,"isIncreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDecreasing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byOne",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byMinusOne",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(),c=function(t){function e(e,r,n){var i=t.call(this)||this;return i.from=e,i.to=r,i.step=n,i.act=i.from,i}return a.a(e,t),e.prototype.hasNext=function(){return this.act!==this.to&&(this.step>0&&this.act<this.to||this.step<0&&this.act>this.to)},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");var t=this.act;return this.act+=this.step,this.step<0&&this.act<this.to?this.act=this.to:this.step>0&&this.act>this.to&&(this.act=this.to),t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.step>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.step<0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return 1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return-1===this.step},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.byOne)return Math.max(this.to-this.from,0);if(this.byMinusOne)return Math.max(this.from-this.to,0);var t=this.isIncreasing?this.to-this.from+1:this.from-this.to+1,e=Math.abs(this.step);return t<=0?0:Math.floor(t/e)},enumerable:!0,configurable:!0}),e}(_),p=function(t){function e(e){var r=t.call(this)||this;return r.arr=e,r.it=new c(0,e.length,1),r}return a.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.arr[this.it.next()]},e.prototype.asList=function(){return this.arr.slice()},e}(_),f=function(t){function e(e){var r=t.call(this)||this;return r.value=e,r.delivered=!1,r}return a.a(e,t),e.prototype.hasNext=function(){return!this.delivered},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.delivered=!0,this.value},e.prototype.asList=function(){return[this.value]},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(_),l=function(t){function e(e){var r=t.call(this)||this;return r.its=e,r.act=e.shift(),r}return a.a(e,t),e.prototype.hasNext=function(){for(var t=!1;!(t=this.act.hasNext())&&this.its.length>0;)this.act=this.its.shift();return t},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.act.next()},e.prototype.asList=function(){for(var t=[];this.hasNext();)t.push(this.next());return t},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.its.every(function(t){return t.isIncreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.its.every(function(t){return t.isDecreasing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.its.every(function(t){return t.byOne})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.its.every(function(t){return t.byMinusOne})},enumerable:!0,configurable:!0}),e}(_),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isIncreasing=!1,e.isDecreasing=!1,e.byOne=!1,e.byMinusOne=!1,e}return a.a(e,t),e.prototype.hasNext=function(){return!1},e.prototype.next=function(){throw new RangeError("end of iterator")},e.prototype.asList=function(){return[]},e}(_),d=function(t){function e(e,r,n){var i=t.call(this)||this;return i.it=e,i.f=r,i.thisArg=n,i}return a.a(e,t),e.prototype.hasNext=function(){return this.it.hasNext()},e.prototype.next=function(){if(!this.hasNext())throw new RangeError("end of iterator");return this.f.call(this.thisArg,this.it.next())},Object.defineProperty(e.prototype,"isIncreasing",{get:function(){return this.it.isIncreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecreasing",{get:function(){return this.it.isDecreasing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byOne",{get:function(){return this.it.byOne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byMinusOne",{get:function(){return this.it.byMinusOne},enumerable:!0,configurable:!0}),e}(_)},46:function(t,e,r){"use strict";(function(t){function n(t,e,r){return new o(t,e,r,r)}function i(t,e){return new o(t.type,t.args,e,t.target)}r.d(e,"a",function(){return s}),r.d(e,"b",function(){return a});var o=function(){function t(t,e,r,n){this.type=t,this.args=e,this.target=r,this.delegateTarget=n,this.timeStamp=new Date,this.stopped=!1,this.stopedPropagation=!1}return Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.target},enumerable:!0,configurable:!0}),t.prototype.isImmediatePropagationStopped=function(){return this.stopped},t.prototype.stopImmediatePropagation=function(){this.stopped=!0},t.prototype.isPropagationStopped=function(){return this.stopedPropagation},t.prototype.stopPropagation=function(){this.stopedPropagation=!0},t}(),u=function(){function t(t){this.type=t,this.listeners=[]}return t.prototype.push=function(t){this.listeners.push(t)},t.prototype.remove=function(t){var e=this.listeners.indexOf(t);return e>=0&&(this.listeners.splice(e,1),!0)},t.prototype.fire=function(t){if(0===this.listeners.length)return!1;var e=[t].concat(t.args);if(1===this.listeners.length)this.listeners[0].apply(t,e);else for(var r=this.listeners.slice(),n=r.length,i=0;i<n&&!t.isImmediatePropagationStopped();++i)r[i].apply(t,e);return!0},Object.defineProperty(t.prototype,"length",{get:function(){return this.listeners.length},enumerable:!0,configurable:!0}),t}(),s=function(){function t(){this.handlers={}}return t.prototype.on=function(t,e){var r=this;return"string"==typeof t?t.split(",").forEach(function(t){r.handlers.hasOwnProperty(t)||(r.handlers[t]=new u(t)),r.handlers[t].push(e)}):Object.keys(t).forEach(function(e){var n=t[e];r.on(e,n)}),this},t.prototype.off=function(t,e){var r=this;return"string"==typeof t?t.split(",").forEach(function(t){if(r.handlers.hasOwnProperty(t)){var n=r.handlers[t];n.remove(e),0===n.length&&delete r.handlers[t]}}):Object.keys(t).forEach(function(e){var n=t[e];r.off(e,n)}),this},t.prototype.list=function(){var t=this,e={};return Object.keys(this.handlers).forEach(function(r){e[r]=t.handlers[r].length}),e},t.prototype.fire=function(t){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return t.split(",").forEach(function(t){e.fireEvent(n(t,r,e))}),this},t.prototype.fireEvent=function(t){if(this.handlers.hasOwnProperty(t.type)){return this.handlers[t.type].fire(t)}return!1},t.prototype.propagate=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.on(r.join(","),function(t){t.isPropagationStopped()||e.fireEvent(i(t,e))})},t}(),t=new s,a=(t.on.bind(t),t.off.bind(t),t.fire.bind(t));t.list.bind(t)}).call(e,r(48))},47:function(t,e,r){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=new p;return t.forEach(function(t){return t.forEach(r.push,r)}),r}function i(t,e,r,n,i){var o=new l(n,i);return o.pushAll(t,e,r),o}function o(t,e,r,n,i,o){var u=new h(n,i,o);return u.pushAll(t,e,r),u}function u(t){return new d(t)}function s(t,e){return new l(t.length,e,t)}var a=r(3),_=r(42),c=r(1);e.b=n,e.d=i,e.c=o,e.a=u,e.e=s;var p=function(){function t(){this.min=NaN,this.max=NaN,this.sum=0,this.mean=0,this._var=0,this.n=0,this.nans=0,this.moment2=NaN,this.moment3=NaN,this.moment4=NaN}return Object.defineProperty(t.prototype,"var",{get:function(){return this.n>1?this._var/(this.n-1):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sd",{get:function(){return Math.sqrt(this.var)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kurtosis",{get:function(){return 0===this.n?0:this.n*this.moment4/(this.moment2*this.moment2)-3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skewness",{get:function(){return 0===this.n?0:Math.sqrt(this.n)*this.moment3/Math.pow(this.moment2,1.5)},enumerable:!0,configurable:!0}),t.prototype.push=function(t){if(t=+t,isNaN(t))return void this.nans++;if(this.n++,this.sum+=t,(t<this.min||isNaN(this.min))&&(this.min=t),(this.max<t||isNaN(this.max))&&(this.max=t),1===this.n)this.mean=t,this._var=0,this.moment2=this.moment3=this.moment4=0;else{var e=this.mean;this.mean=e+(t-e)/this.n,this._var=this._var+(t-e)*(t-this.mean);var r=t-e,n=r/this.n,i=n*n,o=r*n*(this.n-1);this.moment4+=o*i*(this.n*this.n-3*this.n+3)+6*i*this.moment2-4*n*this.moment3,this.moment3+=o*n*(this.n-2)-3*n*this.moment2,this.moment2+=o}},t}(),f=function(){function t(t,e){this.missing_=0,this.missingRange_=r.i(_.e)(),this.bins_=[];for(var n=0;n<t;++n)this.bins_.push(e&&e.length>n?e[n]:0)}return Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max(Math.max.apply(Math,this.bins_),this.missing_)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return Math.max.apply(Math,this.bins_)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.validCount+this.missing_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this.bins_.reduce(function(t,e){return t+e},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this.bins_.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return-1},t.prototype.frequency=function(t){return this.bins_[t]},t.prototype.range=function(t){return this.ranges_?this.ranges_[t]:r.i(_.e)()},Object.defineProperty(t.prototype,"missing",{get:function(){return this.missing_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return this.missingRange_},enumerable:!0,configurable:!0}),t.prototype.pushAll=function(t,e,n){for(var i=this,o=[],u=[],s=this.bins-1;s>=0;--s)o.push([]);if(e){var a=e.iter(n);t.forEach(function(t){var e=a.next(),r=i.binOf(t);r<0?(i.missing_++,u.push(e)):(i.bins_[r]++,o[r].push(e))}),this.ranges_=o.map(function(t){return r.i(_.d)(t.sort().filter(function(t,e,r){return t!==r[e-1]}))}),this.missingRange_=r.i(_.d)(u.sort().filter(function(t,e,r){return t!==r[e-1]}))}else t.forEach(function(t){var e=i.binOf(t);e<0?i.missing_++:i.bins_[e]++}),this.ranges_=null,this.missingRange_=null},t.prototype.forEach=function(t,e){return this.bins_.forEach(t,e)},t}(),l=function(t){function e(e,r,n){var i=t.call(this,e,n)||this;return i.value_range=r,i}return a.a(e,t),e.prototype.binOf=function(t){return"number"==typeof t?this.binOfImpl(t):-1},e.prototype.binOfImpl=function(t){if(isNaN(t))return-1;var e=(t-this.value_range[0])/(this.value_range[1]-this.value_range[0]),r=Math.round(e*(this.bins-1));return r<0&&(r=0),r>=this.bins&&(r=this.bins-1),isNaN(r)?-1:r},e}(f),h=function(t){function e(e,r,n){var i=t.call(this,e.length)||this;return i.values=e,i.categories=r,i.colors=n,i}return a.a(e,t),e.prototype.binOf=function(t){return this.values.indexOf(t)},e}(f),d=function(){function t(t){this.range_=t}return Object.defineProperty(t.prototype,"categories",{get:function(){return this.range_.groups.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colors",{get:function(){return this.range_.groups.map(function(t){return t.color})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestFrequency",{get:function(){return Math.max.apply(Math,this.range_.groups.map(function(t){return t.length}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"largestBin",{get:function(){return this.largestFrequency},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this.range_.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validCount",{get:function(){return this.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this.range_.groups.length},enumerable:!0,configurable:!0}),t.prototype.binOf=function(t){return r.i(c.q)(this.range_.groups,function(e){return e.name===t})},t.prototype.frequency=function(t){return this.range_.groups[t].length},t.prototype.range=function(t){return r.i(_.d)(this.range_.groups[t])},Object.defineProperty(t.prototype,"missing",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"missingRange",{get:function(){return r.i(_.e)()},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){return this.range_.groups.forEach(function(r,n){return t.call(e,r.length,n)})},t}()},48:function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},49:function(t,e,r){"use strict";var n=r(3),i=r(42),o=r(43),u=r(47);r.d(e,"a",function(){return s});var s=function(t){function e(e,r,n){var i=t.call(this)||this;return i.root=e,i.groupIndex=r,i.groupDesc=n,i}return n.a(e,t),Object.defineProperty(e.prototype,"desc",{get:function(){return this.root.desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return[this.groupDesc]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngroups",{get:function(){return 1},enumerable:!0,configurable:!0}),e.prototype.group=function(t){return 0===t?this:null},Object.defineProperty(e.prototype,"idtype",{get:function(){return this.root.idtype},enumerable:!0,configurable:!0}),e.prototype.hist=function(t,e){return void 0===e&&(e=r.i(i.c)()),this.range().then(function(t){return r.i(u.a)(t)})},e.prototype.vector=function(){return Promise.all([this.root.vector(),this.rangeGroup()]).then(function(t){return t[0].view(r.i(i.d)(t[1]))})},e.prototype.origin=function(){return this.root.origin()},e.prototype.range=function(){return this.rangeGroup().then(function(t){return new i.a(t.name,[t])})},e.prototype.idRange=function(){var t=this;return this.root.idRange().then(function(e){var r=e.groups[t.groupIndex];return new i.a(r.name,[r])})},e.prototype.rangeGroup=function(){var t=this;return this.root.range().then(function(e){return e.groups[t.groupIndex]})},e.prototype.names=function(t){var e=this;return void 0===t&&(t=r.i(i.c)()),this.rangeGroup().then(function(n){var o=r.i(i.d)(n).preMultiply(t);return e.root.names(o)})},e.prototype.ids=function(t){var e=this;return void 0===t&&(t=r.i(i.c)()),this.rangeGroup().then(function(n){var o=r.i(i.d)(n).preMultiply(t);return e.root.ids(o)})},e.prototype.idView=function(t){return void 0===t&&(t=r.i(i.c)()),Promise.reject("not implemented")},e.prototype.toString=function(){return this.persist()},Object.defineProperty(e.prototype,"idtypes",{get:function(){return[this.idtype]},enumerable:!0,configurable:!0}),e.prototype.size=function(){return[this.length]},Object.defineProperty(e.prototype,"length",{get:function(){return this.groupDesc.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dim",{get:function(){return this.size()},enumerable:!0,configurable:!0}),e.prototype.persist=function(){return{root:this.root.persist(),group:this.groupIndex}},e.prototype.restore=function(t){return this},e}(o.a)},51:function(t,e,r){"use strict";function n(){return Promise.all(Object.keys(m).map(function(t){return m[t]}))}function i(t,e){return m[t.id]=e,b[t.fqname]=e,g[t.name]=e,e}function o(t){var e=t.replace(/[!#$%&'\(\)\*\+,\.\/:;<=>\?@\[\\\]\^`\{\|}~_]/g," ");return e=e.toLowerCase(),e=e.split(/\s/).map(function(t,e){return 0===e?t:t[0].toUpperCase()+t.substr(1)}).join("")}function u(t){if(void 0===t)return null;if(t.id=t.id||o(t.name+v(5)),t.fqname=t.fqname||t.name,t.id in m)return m[t.id];var e=y.filter(function(e){return e.id===t.type});return 0===e.length?i(t,Promise.resolve(new d.a(t))):i(t,e[0].load().then(function(e){return e.factory(t)}))}function s(t){var e="function"==typeof t?t:f.f,i=void 0!==t&&"function"!=typeof t?t:{},o=f.d?n():r.i(l.a)("/dataset/",i).then(function(t){return Promise.all(t.map(function(t){return u(t)}))});return e!==f.f&&(o=o.then(function(t){return t.filter(e)})),o}function a(t){return"string"==typeof t||t instanceof RegExp?_(t):(t.limit=1,s(t).then(function(e){return 0===e.length?Promise.reject({error:"nothing found, matching",args:t}):Promise.resolve(e[0])}))}function _(t){return p(t,g,"name")}function c(t){return p(t,b,"fqname")}function p(t,e,r){void 0===r&&(r="name");var n=null;return Object.keys(e).some(function(r){return null!=r.match(t)&&(n=e[r],!0)})?n:a((i={},i[r]="string"==typeof t?t:t.source,i));var i}var f=r(1),l=r(12),h=r(0),d=r(44);r(37);e.a=c;var y=r.i(h.b)("datatype"),m={},g={},b={},v=f.r}});